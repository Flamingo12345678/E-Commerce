# üõí E-Commerce Platform Django

Plateforme e-commerce compl√®te d√©velopp√©e avec Django, int√©grant un syst√®me de paiement avanc√© avec Stripe et PayPal, authentification √† double facteur, et syst√®me de facturation natif.

## üöÄ Fonctionnalit√©s Principales

### üí≥ Syst√®me de Paiement Complet
- **Int√©gration Stripe** : Cartes de cr√©dit, paiements s√©curis√©s, webhooks
- **Int√©gration PayPal** : Paiements PayPal, abonnements
- **Gestion des m√©thodes de paiement** : Sauvegarde s√©curis√©e, cartes par d√©faut
- **Webhooks temps r√©el** : Synchronisation automatique des paiements
- **Facturation native** : G√©n√©ration et gestion des factures

### üîê S√©curit√© Avanc√©e
- **Authentification 2FA** : TOTP avec Google Authenticator
- **Protection CSRF** : S√©curisation des formulaires
- **Validation des webhooks** : Signatures cryptographiques
- **Gestion des sessions** : Expiration automatique

### üì¶ Gestion E-Commerce
- **Catalogue produits** : Articles, cat√©gories, images
- **Panier d'achat** : Gestion quantit√©s, totaux
- **Gestion stock** : Suivi inventaire en temps r√©el
- **Commandes** : Workflow complet de la commande √† la livraison

### üè™ Interface Administration
- **Dashboard admin** : Vue d'ensemble des ventes
- **Gestion produits** : CRUD complet avec upload d'images
- **Suivi commandes** : √âtats, historique, notifications
- **Analytiques** : Rapports de vente, statistiques

## üõ†Ô∏è Technologies Utilis√©es

### Backend
- **Django 5.2.4** - Framework web Python
- **SQLite** - Base de donn√©es (d√©veloppement)
- **Pillow** - Traitement d'images
- **django-environ** - Gestion variables d'environnement

### Paiements & Facturation
- **Stripe 11.6.0** - Processeur de paiement principal
- **PayPal REST SDK** - Int√©gration PayPal
- **Facturation native** - Syst√®me interne de factures

### S√©curit√© & Authentification
- **django-two-factor-auth** - Authentification 2FA
- **django-otp** - Codes √† usage unique
- **pyotp** - G√©n√©ration TOTP
- **qrcode** - QR codes pour configuration 2FA

### Interface Utilisateur
- **django-crispy-forms** - Formulaires stylis√©s
- **django-formtools** - Formulaires multi-√©tapes
- **Templates Bootstrap** - Interface responsive

## üì¶ Installation

### Pr√©requis
- Python 3.11+
- pip
- virtualenv (recommand√©)

### Configuration

1. **Cloner le projet**
```bash
git clone https://github.com/Flamingo12345678/E-Commerce
cd E-Commerce
```

2. **Cr√©er un environnement virtuel**
```bash
python -m venv env
source env/bin/activate  # macOS/Linux
# ou
env\Scripts\activate     # Windows
```

3. **Installer les d√©pendances**
```bash
pip install -r requirements.txt
```

4. **Configuration des variables d'environnement**
```bash
cp .env.example .env
```

√âditer `.env` avec vos cl√©s :
```env
# Django
SECRET_KEY=votre-cle-secrete-django
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Stripe
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_ENDPOINT_SECRET=whsec_...

# PayPal
PAYPAL_CLIENT_ID=votre-client-id
PAYPAL_CLIENT_SECRET=votre-secret
PAYPAL_MODE=sandbox  # ou 'live' pour production
```

5. **Migrations et setup initial**
```bash
python manage.py migrate
python manage.py collectstatic
python manage.py createsuperuser
```

6. **Lancer le serveur de d√©veloppement**
```bash
python manage.py runserver
```

L'application sera accessible sur `http://127.0.0.1:8000/`

## üîß Configuration Avanc√©e

### Configuration Stripe

1. **Cr√©er un compte Stripe** sur [stripe.com](https://stripe.com)
2. **R√©cup√©rer les cl√©s API** dans le dashboard Stripe
3. **Configurer les webhooks** :
   - URL : `https://votre-domaine.com/accounts/webhook/stripe/`
   - √âv√©nements : `payment_intent.succeeded`, `payment_method.attached`

### Configuration PayPal

1. **Cr√©er une application PayPal** sur [developer.paypal.com](https://developer.paypal.com)
2. **R√©cup√©rer Client ID et Secret**
3. **Configurer les URLs de retour** dans votre application PayPal

### Configuration 2FA

L'authentification √† double facteur est automatiquement disponible :
- Acc√®s via `/account/login/`
- Configuration QR code dans le profil utilisateur
- Support Google Authenticator, Authy, etc.

## üß™ Tests

### Lancer les tests
```bash
# Tests complets
python manage.py test

# Tests sp√©cifiques
python manage.py test accounts.tests
python manage.py test store.tests

# Tests de paiement
python test_payment_system.py
python test_webhooks.py
```

### Tests d'int√©gration paiement
```bash
# Test Stripe
python test_integration_payment.py

# Test m√©thodes de paiement
python test_payment_methods.py
```

## üìä Monitoring & Logs

### Logs disponibles
- `django.log` - Logs g√©n√©raux de l'application
- `payment.log` - Logs sp√©cifiques aux paiements
- `webhook_debug.log` - Debug des webhooks

### Commandes utiles
```bash
# V√©rifier les logs en temps r√©el
tail -f django.log
tail -f payment.log

# Debug webhooks
python debug_webhooks.py
```

## üöÄ D√©ploiement

### Variables d'environnement production
```env
DEBUG=False
ALLOWED_HOSTS=votre-domaine.com
SECRET_KEY=cle-secrete-forte

# URLs de production
STRIPE_PUBLISHABLE_KEY=pk_live_...
STRIPE_SECRET_KEY=sk_live_...
PAYPAL_MODE=live
```

### Checklist d√©ploiement
- [ ] Variables d'environnement configur√©es
- [ ] Base de donn√©es migr√©e
- [ ] Fichiers statiques collect√©s
- [ ] HTTPS configur√©
- [ ] Webhooks configur√©s avec les bonnes URLs
- [ ] Backups automatiques configur√©s

## üìö Documentation Technique & Architecture

### üèóÔ∏è Architecture du Projet

```
E-Commerce/
‚îú‚îÄ‚îÄ accounts/                    # üë§ Gestion utilisateurs, paiements, facturation
‚îÇ   ‚îú‚îÄ‚îÄ models.py               # Mod√®les User, PaymentMethod, Transaction
‚îÇ   ‚îú‚îÄ‚îÄ payment_services.py     # Services Stripe/PayPal
‚îÇ   ‚îú‚îÄ‚îÄ invoice_services.py     # Syst√®me de facturation native
‚îÇ   ‚îú‚îÄ‚îÄ webhook_services.py     # Gestion webhooks
‚îÇ   ‚îî‚îÄ‚îÄ admin_views.py          # Interface d'administration
‚îú‚îÄ‚îÄ store/                      # üõçÔ∏è Catalogue, panier, commandes
‚îÇ   ‚îú‚îÄ‚îÄ models.py               # Mod√®les Product, Order, Cart
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # Vues e-commerce
‚îÇ   ‚îî‚îÄ‚îÄ catalog_views.py        # Gestion catalogue
‚îú‚îÄ‚îÄ shop/                       # ‚öôÔ∏è Configuration Django principale
‚îÇ   ‚îú‚îÄ‚îÄ settings.py             # Configuration g√©n√©rale
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                 # Routage principal
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py                 # D√©ploiement WSGI
‚îú‚îÄ‚îÄ templates/                  # üé® Templates HTML
‚îú‚îÄ‚îÄ static/                     # üìÅ Fichiers CSS, JS, images
‚îú‚îÄ‚îÄ media/                      # üì∏ Uploads utilisateurs
‚îú‚îÄ‚îÄ docs/                       # üìö Documentation compl√®te (31 fichiers)
‚îÇ   ‚îú‚îÄ‚îÄ README.md               # Index de la documentation
‚îÇ   ‚îú‚îÄ‚îÄ SYSTEME_FACTURATION_*.md
‚îÇ   ‚îú‚îÄ‚îÄ RAPPORT_*.md
‚îÇ   ‚îú‚îÄ‚îÄ MISSION_*.md
‚îÇ   ‚îú‚îÄ‚îÄ CORRECTION_*.md
‚îÇ   ‚îî‚îÄ‚îÄ GUIDE_*.md
‚îî‚îÄ‚îÄ requirements.txt            # D√©pendances Python
```

### üìã Documentation des Op√©rations R√©alis√©es

> üìÅ **Toute la documentation technique est organis√©e dans le dossier [`docs/`](./docs/)** 
> 
> **Index complet** : [docs/README.md](./docs/README.md)

#### üîß **Phase 1 : Configuration & Infrastructure**
- **[RAPPORT_ADMIN_UPDATE_FINAL.md](./docs/RAPPORT_ADMIN_UPDATE_FINAL.md)** - Mise √† jour interface administration
- **[SYSTEME_FACTURATION_GUIDE.md](./docs/SYSTEME_FACTURATION_GUIDE.md)** - Guide complet syst√®me de facturation
- **[SYSTEME_FACTURATION_NATIF.md](./docs/SYSTEME_FACTURATION_NATIF.md)** - Impl√©mentation facturation native

#### üí≥ **Phase 2 : Syst√®me de Paiement**
- **[RAPPORT_FINAL_IMPLEMENTATION_PAIEMENT.md](./docs/RAPPORT_FINAL_IMPLEMENTATION_PAIEMENT.md)** - Impl√©mentation compl√®te Stripe/PayPal
- **[INTEGRATION_PAIEMENTS_COMPLETE.md](./docs/INTEGRATION_PAIEMENTS_COMPLETE.md)** - Int√©gration des syst√®mes de paiement
- **[RAPPORT_VERIFICATION_SYSTEME_PAIEMENT.md](./docs/RAPPORT_VERIFICATION_SYSTEME_PAIEMENT.md)** - V√©rification et validation
- **[GUIDE_TEST_PAIEMENTS.md](./docs/GUIDE_TEST_PAIEMENTS.md)** - Guide de test des paiements

#### üîê **Phase 3 : S√©curit√© & Authentification**
- **[MISSION_2FA_ACCOMPLIE.md](./docs/MISSION_2FA_ACCOMPLIE.md)** - Impl√©mentation authentification 2FA
- **[RAPPORT_2FA_IMPLEMENTATION.md](./docs/RAPPORT_2FA_IMPLEMENTATION.md)** - Rapport technique 2FA
- **[RAPPORT_WEBHOOKS_FINAL.md](./docs/RAPPORT_WEBHOOKS_FINAL.md)** - S√©curisation webhooks

#### üßæ **Phase 4 : Facturation & Gestion**
- **[RAPPORT_IMPLEMENTATION_FACTURATION_FINAL.md](./docs/RAPPORT_IMPLEMENTATION_FACTURATION_FINAL.md)** - Syst√®me facturation final
- **[RAPPORT_MIGRATION_FACTURATION_NATIVE_FINAL.md](./docs/RAPPORT_MIGRATION_FACTURATION_NATIVE_FINAL.md)** - Migration vers facturation native
- **[RAPPORT_NETTOYAGE_PAIEMENTS.md](./docs/RAPPORT_NETTOYAGE_PAIEMENTS.md)** - Optimisation syst√®me paiements

#### üêõ **Phase 5 : Corrections & Optimisations**
- **[CORRECTIONS_PRIORITAIRES.md](./docs/CORRECTIONS_PRIORITAIRES.md)** - Liste des corrections prioritaires
- **[CORRECTION_1_COMPTEUR_PANIER.md](./docs/CORRECTION_1_COMPTEUR_PANIER.md)** - Fix compteur panier
- **[CORRECTION_2_GESTION_STOCK.md](./docs/CORRECTION_2_GESTION_STOCK.md)** - Am√©lioration gestion stock
- **[CORRECTION_3_REQUETES_OPTIMISEES.md](./docs/CORRECTION_3_REQUETES_OPTIMISEES.md)** - Optimisation requ√™tes base de donn√©es
- **[CORRECTION_IMAGES_CARTES.md](./docs/CORRECTION_IMAGES_CARTES.md)** - Fix affichage images produits

#### üß™ **Phase 6 : Tests & Validation**
- **[MISSION_TESTS_ACCOMPLIE.md](./docs/MISSION_TESTS_ACCOMPLIE.md)** - Impl√©mentation tests complets
- **[RAPPORT_TESTS_ADMIN_COMPLETS.md](./docs/RAPPORT_TESTS_ADMIN_COMPLETS.md)** - Tests interface administration
- **[RAPPORT_TESTS_UNITAIRES.md](./docs/RAPPORT_TESTS_UNITAIRES.md)** - Tests unitaires du syst√®me
- **[RAPPORT_VERIFICATION_LOGIQUE_METIER.md](./docs/RAPPORT_VERIFICATION_LOGIQUE_METIER.md)** - Validation logique m√©tier

#### üé® **Phase 7 : Interface & Templates**
- **[VERIFICATION_TEMPLATE_CHECKOUT.md](./docs/VERIFICATION_TEMPLATE_CHECKOUT.md)** - Validation templates checkout
- **[RAPPORT_VERIFICATION_TEMPLATES.md](./docs/RAPPORT_VERIFICATION_TEMPLATES.md)** - V√©rification tous templates
- **[HERO_SECTION_UPDATE.md](./docs/HERO_SECTION_UPDATE.md)** - Mise √† jour section hero
- **[HERO_FULLSCREEN_UPDATE.md](./docs/HERO_FULLSCREEN_UPDATE.md)** - Hero en plein √©cran
- **[LANDING_PAGE_PROFESSIONNELLE.md](./docs/LANDING_PAGE_PROFESSIONNELLE.md)** - Page d'accueil professionnelle

#### ‚úÖ **Phase 8 : V√©rification Finale & Audit**
- **[RAPPORT_FINAL_VERIFICATION_COMPLETE.md](./docs/RAPPORT_FINAL_VERIFICATION_COMPLETE.md)** - V√©rification compl√®te du syst√®me
- **[RAPPORT_AUDIT_LANDING_PAGE_LOGIQUE_METIER.md](./docs/RAPPORT_AUDIT_LANDING_PAGE_LOGIQUE_METIER.md)** - Audit final
- **[RAPPORT_CORRECTION_ERREURS_PAIEMENT.md](./docs/RAPPORT_CORRECTION_ERREURS_PAIEMENT.md)** - Correction erreurs finales
- **[RAPPORT_CORRECTION_ARTICLES_PAIEMENT.md](./docs/RAPPORT_CORRECTION_ARTICLES_PAIEMENT.md)** - Fix articles et paiement

### üîÑ Workflow des Op√©rations

```mermaid
graph TD
    A[Configuration Infrastructure] --> B[Syst√®me Paiement]
    B --> C[S√©curit√© 2FA]
    C --> D[Facturation Native]
    D --> E[Corrections & Optimisations]
    E --> F[Tests & Validation]
    F --> G[Interface & Templates]
    G --> H[V√©rification Finale]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#ffebee
    style F fill:#f1f8e9
    style G fill:#fce4ec
    style H fill:#e0f2f1
```

### üìä √âtat des Fonctionnalit√©s

| Fonctionnalit√© | √âtat | Documentation |
|---|---|---|
| üí≥ Paiements Stripe | ‚úÖ Complet | `docs/RAPPORT_FINAL_IMPLEMENTATION_PAIEMENT.md` |
| üí∞ Paiements PayPal | ‚úÖ Complet | `docs/INTEGRATION_PAIEMENTS_COMPLETE.md` |
| üîê Authentification 2FA | ‚úÖ Complet | `docs/MISSION_2FA_ACCOMPLIE.md` |
| üßæ Facturation Native | ‚úÖ Complet | `docs/SYSTEME_FACTURATION_NATIF.md` |
| üõí Gestion Panier | ‚úÖ Corrig√© | `docs/CORRECTION_1_COMPTEUR_PANIER.md` |
| üì¶ Gestion Stock | ‚úÖ Optimis√© | `docs/CORRECTION_2_GESTION_STOCK.md` |
| üîç Optimisation DB | ‚úÖ Complet | `docs/CORRECTION_3_REQUETES_OPTIMISEES.md` |
| üß™ Tests Complets | ‚úÖ Valid√© | `docs/MISSION_TESTS_ACCOMPLIE.md` |
| üé® Interface UI | ‚úÖ Finalis√© | `docs/LANDING_PAGE_PROFESSIONNELLE.md` |
| üîí Webhooks S√©curis√©s | ‚úÖ Actif | `docs/RAPPORT_WEBHOOKS_FINAL.md` |

### üéØ Points Cl√©s de l'Architecture

1. **S√©paration des responsabilit√©s** : Modules distincts pour paiements, facturation, e-commerce
2. **S√©curit√© multicouche** : 2FA, validation webhooks, protection CSRF
3. **Int√©gration multi-fournisseurs** : Stripe ET PayPal pour maximum compatibilit√©
4. **Facturation native** : Syst√®me interne complet avec templates personnalisables
5. **Tests exhaustifs** : Couverture compl√®te des fonctionnalit√©s critiques
6. **Interface responsive** : Design adaptatif desktop/mobile
7. **Monitoring int√©gr√©** : Logs d√©taill√©s pour debug et suivi

## ü§ù Contribution

1. Fork le projet
2. Cr√©er une branche feature (`git checkout -b feature/nouvelle-fonctionnalite`)
3. Commit les changements (`git commit -am 'Ajout nouvelle fonctionnalit√©'`)
4. Push la branche (`git push origin feature/nouvelle-fonctionnalite`)
5. Cr√©er une Pull Request

## üìÑ Licence

Ce projet est sous licence MIT. Voir le fichier `LICENSE` pour plus de d√©tails.

## üÜò Support

### Issues communes

**Erreur de webhook Stripe**
```bash
# V√©rifier la signature
python test_stripe_signature.py
```

**Probl√®me de paiement PayPal**
```bash
# Debug PayPal
python debug_webhook_headers.py
```

**Erreur 2FA**
- V√©rifier la synchronisation de l'horloge
- Reg√©n√©rer le QR code si n√©cessaire

### Contact
- üìß Email : [votre-email]
- üêõ Issues : [lien-vers-issues]
- üìñ Wiki : [lien-vers-wiki]

---

**üéâ Plateforme e-commerce pr√™te pour la production !**

‚úÖ Paiements s√©curis√©s | ‚úÖ 2FA activ√© | ‚úÖ Facturation native | ‚úÖ Interface admin compl√®te

Merci de contribuer √† ce projet ! Pour toute question, n'h√©sitez pas √† ouvrir une issue ou √† nous contacter directement.
# üõí E-Commerce Platform Django